{"version":3,"sources":["../../../app/models/index.js"],"names":["fs","require","path","knex","getModelFiles","dir","readdirSync","filter","file","indexOf","map","join","files","__dirname","models","reduce","modelsObj","filename","initModel","model","name","module","exports"],"mappings":"AAAA;;;;;;;;;;;;AAEA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,uBAAD,CAApB;;AAEA,IAAMG,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,GAAG;AAAA,SAAIL,EAAE,CAACM,WAAH,CAAeD,GAAf,EAC1BE,MAD0B,CACnB,UAAAC,IAAI;AAAA,WAAKA,IAAI,CAACC,OAAL,CAAa,GAAb,MAAsB,CAAvB,IAA8BD,IAAI,KAAK,UAA3C;AAAA,GADe,EAE1BE,GAF0B,CAEtB,UAAAF,IAAI;AAAA,WAAIN,IAAI,CAACS,IAAL,CAAUN,GAAV,EAAeG,IAAf,CAAJ;AAAA,GAFkB,CAAJ;AAAA,CAAzB,C,CAIA;AACA;AACA;AACA;AACA;;;AACA,IAAMI,KAAK,GAAGR,aAAa,CAACS,SAAD,CAA3B;AAEA,IAAMC,MAAM,GAAGF,KAAK,CAACG,MAAN,CAAa,UAACC,SAAD,EAAYC,QAAZ,EAAyB;AACnD,MAAMC,SAAS,GAAGjB,OAAO,CAACgB,QAAD,CAAzB;;AACA,MAAME,KAAK,GAAGD,SAAS,CAACf,IAAD,CAAvB;AAEA,MAAIgB,KAAJ,EAAWH,SAAS,CAACG,KAAK,CAACC,IAAP,CAAT,GAAwBD,KAAxB;AAEX,SAAOH,SAAP;AACD,CAPc,EAOZ,EAPY,CAAf;AASAK,MAAM,CAACC,OAAP,GAAiBR,MAAjB","sourcesContent":["'use strict'\n\nconst fs = require('fs')\nconst path = require('path')\nconst knex = require('../../config/database')\n\nconst getModelFiles = dir => fs.readdirSync(dir)\n  .filter(file => (file.indexOf('.') !== 0) && (file !== 'index.js'))\n  .map(file => path.join(dir, file))\n\n// Gather up all model files (i.e., any file present in the current directory\n// that is not this file) and export them as properties of an object such that\n// they may be imported using destructuring like\n// `const { MyModel } = require('./models')` where there is a model named\n// `MyModel` present in the exported object of gathered models.\nconst files = getModelFiles(__dirname)\n\nconst models = files.reduce((modelsObj, filename) => {\n  const initModel = require(filename)\n  const model = initModel(knex)\n\n  if (model) modelsObj[model.name] = model\n\n  return modelsObj\n}, {})\n\nmodule.exports = models\n"],"file":"index.js"}